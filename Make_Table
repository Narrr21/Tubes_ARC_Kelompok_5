CREATE DATABASE lumbung;

USE lumbung;

CREATE TABLE account (
	uid INTEGER PRIMARY KEY AUTO_INCREMENT,
    email VARCHAR(255) NOT NULL,
    password VARCHAR(255) NOT NULL
);

INSERT INTO account (email, password)
VALUES
('tes@gmail.com', 'tespass');

SELECT * FROM account;

-- countFood nanti diganti aja pake jumlah reviewnya
-- contoh :
-- SELECT
-- COUNT(userId)
-- FROM
--     review;
CREATE TABLE dataUser (
    uid INTEGER PRIMARY KEY ,
    userName VARCHAR(255) NOT NULL,
    profilePicture VARCHAR(255) NOT NULL,
    userAge INTEGER NOT NULL,
    bio VARCHAR(255),
    FOREIGN KEY (uid) REFERENCES account(uid)
);

DROP TABLE `dataUser`

DROP TABLE `account`

INSERT INTO dataUser (uid, userName, profilePicture, userAge, bio)
VALUES
('1', 'tes name', 'profile picture tes', '12', 'tes bio');

SELECT * FROM dataUser;

CREATE TABLE kulinerNangor (
	kulinerId INTEGER PRIMARY KEY AUTO_INCREMENT,
    foodName VARCHAR(100) NOT NULL,
    foodOrDrink VARCHAR(20) NOT NULL,
    images VARCHAR(255) NOT NULL, 
    rating FLOAT NOT NULL
);

INSERT INTO kulinerNangor (foodName, foodOrDrink, images, rating)
VALUES
('Gado gado', 'Makanan', 'https://tse3.mm.bing.net/th?id=OIP.P9qQ2ewGJ-ugtUeeOZeCVQHaHa&pid=Api&P=0&h=220', '9.2'),
('Mie Ayam', 'Makanan', 'https://tse1.mm.bing.net/th?id=OIP.acuXeca3UMPBLMj0x6iCtAHaHB&pid=Api&P=0&h=220', '8.5'),
('Es Buah', 'Minuman', 'https://tse2.mm.bing.net/th?id=OIP.5rnMuuBn-BaYSLlAU05AGwHaH6&pid=Api&P=0&h=220', '9.9')

SELECT * FROM kulinerNangor;

CREATE TABLE review (
    userId INTEGER,
    kulinerId INTEGER,
    reviewText TEXT,
    rating INTEGER,
    reviewDate DATE DEFAULT CURRENT_DATE,
    FOREIGN KEY (userId) REFERENCES dataUser(uid),
    FOREIGN KEY (kulinerId) REFERENCES kulinerNangor(kulinerId),
    PRIMARY KEY(userId, kulinerId)
);

DROP TABLE review

INSERT INTO review (userId, kulinerId, reviewText, rating)
VALUES
(1, 1, 'kucing gorengnya enak', '9'),
(1, 2, 'sandal bakarnya enak banget', '69');

SELECT * FROM review;